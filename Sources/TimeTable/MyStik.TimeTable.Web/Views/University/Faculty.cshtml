@using MyStik.TimeTable.Data
@using MyStik.TimeTable.DataServices
@model MyStik.TimeTable.Data.ActivityOrganiser
@{
    ViewBag.Title = "Startseite";

    var isStudent = ViewBag.UserRight == null || ViewBag.UserRight.IsStudent;

    var db = new TimeTableDbContext();
    var org = db.Organisers.SingleOrDefault(x => x.Id == Model.Id);

    var semService = new SemesterService();
    var cSem = semService.GetSemester(DateTime.Today);
    var nSem = semService.GetNextSemester(cSem);

    if (org.LabelSet == null)
    {
        var ls = new ItemLabelSet();
        org.LabelSet = ls;
        db.ItemLabelSets.Add(ls);
        db.SaveChanges();
    }
}


<div class="row">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@Url.Action("Index", "Dashboard")"><i class="bi bi-grid"></i></a></li>
                <li class="breadcrumb-item"><a href="@Url.Action("Campus", "University")">HM</a></li>
                <li class="breadcrumb-item active" aria-current="page">@Model.ShortName</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-sm-6 col-md-3">
        <div class="card border-secondary">
            <div class="card-body">
                <h5 class="card-title text-center">
                    <i class="bi bi-book"></i><br />
                    Angebote
                </h5>
            </div>
            <div class="list-group">
                @if (!isStudent)
                {
                    <a href="@Url.Action("Index", "Catalogs", new { id = Model.Id })" class="list-group-item list-group-item-action">Modulkataloge</a>
                    <a href="@Url.Action("Index", "Labels", new { id = Model.Id })" class="list-group-item list-group-item-action">Kohorten</a>
                }
                <a href="@Url.Action("Index", "Curricula", new { id = Model.Id })" class="list-group-item list-group-item-action">Studienangebote</a>
                <a href="@Url.Action("Organiser", "Dictionary", new { orgId = Model.Id, semId = ViewBag.CurrentSemester.Id })" class="list-group-item list-group-item-action">Vorlesungsverzeichnis</a>
                <a href="@Url.Action("Organiser", "Events", new {orgId = Model.Id})" class="list-group-item list-group-item-action list-group-item-danger">Veranstaltungsverzeichnis<br /><i class="bi bi-exclamation-circle text-danger"></i> veraltet - wird demnächst ersetzt</a>

                @if (!isStudent)
                {
                    <a href="@Url.Action("Index", "Newsletter", new {id = Model.Id})#" class="list-group-item list-group-item-action">Newsletter</a>
                }
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-3">
        <div class="card border-secondary">
            <div class="card-body">
                <h5 class="card-title text-center">
                    <i class="bi bi-building"></i><br />
                    Räume
                </h5>
            </div>
            <div class="list-group">
                @if (!isStudent)
                {
                    <a href="@Url.Action("Index", "Reservation", new { id = Model.Id })" class="list-group-item list-group-item-action">Raumreservierungen</a>
                    <a href="@Url.Action("Organiser", "Rooms", new { id = Model.Id })" class="list-group-item list-group-item-action">Raumverzeichnis</a>
                    <a href="@Url.Action("Free", "Room", new { id = Model.Id })" class="list-group-item list-group-item-action">Raumsuche</a>
                    @*
                        <a href="@Url.Action("Index", "RoomBookings", new { id = Model.Id })" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">Raumbuchungen</a>
                        <a href="@Url.Action("Reports", "Rooms", new { id = Model.Id })" class="list-group-item list-group-item-action">Auswertungen und Berichte</a>
                    *@
                }
                <a href="@Url.Action("Today", "Activity", new { id = Model.Id })" class="list-group-item list-group-item-action">Tagesprogramm</a>
                @if (!isStudent)
                {
                    <a href="@Url.Action("DailyRota", "Activity", new {id=Model.Id})" class="list-group-item list-group-item-action">Raumbelegungen</a>
                    <a href="@Url.Action("Index", "Advertisements", new {id = Model.Id})" class="list-group-item list-group-item-action">Aushänge / virtueller Schaukasten</a>
                    <a href="@Url.Action("Index", "Infoscreens", new {id = Model.Id})" class="list-group-item list-group-item-action">Infoscreens</a>
                }
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-3">
        <div class="card border-secondary">
            <div class="card-body">
                <h5 class="card-title text-center">
                    <i class="bi bi-people"></i><br />
                    Personen
                </h5>
            </div>
            <div class="list-group">
                <a href="@Url.Action("Organiser", "Lecturer", new {id=Model.Id})" class="list-group-item list-group-item-action">Lehrende</a>
                @if (!isStudent)
                {
                    <a href="@Url.Action("Index", "Students", new {id = Model.Id})" class="list-group-item list-group-item-action">Studierende</a>
                    <a href="@Url.Action("List", "Alumni", new {id = Model.Id})" class="list-group-item list-group-item-action">Alumni</a>
                    <a href="@Url.Action("Admin", "Assessment", new {id = Model.Id})" class="list-group-item list-group-item-action">Externe Partner</a>
                    <a href="@Url.Action("Index", "Autonomy", new {id = Model.Id})" class="list-group-item list-group-item-action">Gremien</a>
                }
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-md-3">
        <div class="card border-secondary">
            <div class="card-body">
                <h5 class="card-title text-center">
                    <i class="bi bi-gear"></i><br />
                    Workflows
                </h5>
            </div>
            <div class="list-group">
                <a href="@Url.Action("Index", "ThesisAdmin", new {id = Model.Id})" class="list-group-item list-group-item-action">Abschlussarbeiten</a>
                <a href="@Url.Action("Organiser", "Lottery", new {orgId = Model.Id, semId = ViewBag.CurrentSemester.Id })" class="list-group-item list-group-item-action">Wahlverfahren</a>
                @if (!isStudent)
                {
                    <a href="@Url.Action("CreateCoursePortal", "Course", new {orgId = Model.Id})" class="list-group-item list-group-item-action">Lehrveranstaltung anlegen</a>
                    <a href="@Url.Action("CreateEvent", "Event", new {orgId = Model.Id})" class="list-group-item list-group-item-action list-group-item-danger">Veranstaltung anlegen<br /><i class="bi bi-exclamation-circle text-danger"></i> veraltet - wird demnächst ersetzt</a>
                    <a href="@Url.Action("Index", "InternshipAdmin", new { id = Model.Id })" class="list-group-item list-group-item-action disabled">Praxissemester</a>
                    <a href="@Url.Action("Admin", "Assessment", new {id = Model.Id})" class="list-group-item list-group-item-action">Aufnahmeverfahren</a>
                    <a href="@Url.Action("Index", "Semester", new {id = Model.Id})" class="list-group-item list-group-item-action">Semesterplanung</a>
                    @*
                        <a href="@Url.Action("Index", "ScriptOrders", new {orgId = Model.Id})" class="list-group-item list-group-item-action">Skriptbestellung</a>
                    *@
                    <a href="@Url.Action("Index", "Messaging", new {id = Model.Id})#" class="list-group-item list-group-item-action">Mailverteiler</a>
                    <a href="@Url.Action("Admins", "Organiser", new {id = Model.Id})" class="list-group-item list-group-item-action">Rechte & Rollen</a>
                }
                else
                {

                }
            </div>
        </div>
    </div>
</div>

<hr />

<div class="row">
    <div class="col-md-2">
        <div class="card mb-3">
            <div class="list-group">
                <a href="@Url.Action("Index", "Messaging", new {id = Model.Id})#" class="list-group-item list-group-item-action"><i class="bi bi-envelope"></i> Mailverteiler</a>
                <a href="@Url.Action("Organiser", "Rooms", new { id = Model.Id })" class="list-group-item list-group-item-action"><i class="bi-building-fill-gear"></i> Raumverzeichnis</a>
                <a href="@Url.Action("Index", "Reservation", new { id = Model.Id })" class="list-group-item list-group-item-action"><i class="bi-building-check"></i> Raumreservierungen</a>
            </div>
        </div>
        <div class="card mb-3">
            <div class="list-group">
                <a href="@Url.Action("Index", "Curricula", new { id = Model.Id })" class="list-group-item list-group-item-action"><i class="bi bi-mortarboard"></i> Studienangebote</a>
                <a href="@Url.Action("Organiser", "Dictionary", new { orgId = Model.Id, semId = ViewBag.CurrentSemester.Id })" class="list-group-item list-group-item-action"><i class="bi bi-collection-play"></i> Lehrveranstaltungen</a>
                <a href="@Url.Action("Organiser", "Lottery", new {orgId = Model.Id, semId = ViewBag.CurrentSemester.Id })" class="list-group-item list-group-item-action"><i class="bi bi-shuffle"></i> Wahlverfahren</a>
                <a href="@Url.Action("Admin", "Assessment", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-person-lines-fill"></i> Aufnahmeverfahren</a>
                <a href="@Url.Action("Index", "ThesisAdmin", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-book"></i> Abschlussarbeiten</a>
                <a href="@Url.Action("Index", "Catalogs", new { id = Model.Id })" class="list-group-item list-group-item-action"><i class="bi bi-boxes"></i> Modulkataloge</a>
            </div>
        </div>
        <div class="card mb-3">
            <div class="list-group">
                <a href="@Url.Action("Index", "Labels", new { id = Model.Id })" class="list-group-item list-group-item-action"><i class="bi bi-people"></i> Kohorten</a>
                <a href="@Url.Action("Organiser", "Lecturer", new {id=Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-person-vcard"></i> Lehrende</a>
                <a href="@Url.Action("Index", "Students", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-person-badge"></i> Studierende</a>
                <a href="@Url.Action("List", "Alumni", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-person-hearts"></i> Alumni</a>
            </div>
        </div>
        <div class="card mb-3">
            <div class="list-group">
                <a href="@Url.Action("Index", "Semester", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-signpost-split"></i> Semesterplanung</a>
                <a href="@Url.Action("Index", "Infoscreens", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-person-video3"></i> Infoscreens</a>
                <a href="@Url.Action("Index", "Newsletter", new {id = Model.Id})#" class="list-group-item list-group-item-action"><i class="bi bi-send"></i> Newsletter</a>
                <a href="@Url.Action("Admins", "Organiser", new {id = Model.Id})" class="list-group-item list-group-item-action"><i class="bi bi-gear"></i> Rechte & Rollen</a>
            </div>
        </div>
    </div>
    <div class="col-md-10">
        <div class="card">
            <div class="list-group">
                <div class="row">
                    <div class="col-md-12">
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group me-2" role="group" aria-label="Auswahl Datum">
                                <div class="input-group">
                                    <a id="btnPrev" href="javascript:onBack()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-chevron-left"></i></a>
                                    <input id="inputDate" type="date" class="form-control form-control-sm" placeholder="Datum" aria-label="Tagesdatum" aria-describedby="btnGroupAddon">
                                    <a id="btnNext" href="javascript:onForward()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-chevron-right"></i></a>
                                </div>
                            </div>
                            <div class="btn-group me-2" role="group" aria-label="Auswahl Zeitraum">
                                <a id="btnDownload" href="javascript:toggNow()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-clock"></i></a>
                                <a id="btnWeekend" href="javascript:toggleDay()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-calendar-date"></i></a>
                            </div>
                            <div class="btn-group me-2" role="group" aria-label="Auswahl Inhalt">
                                <a id="btnDownload" href="javascript:toggCourses()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-collection-play"></i></a>
                                <a id="btnWeekend" href="javascript:toggleOfficeHours()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-people"></i></a>
                                <a id="btnSearch" href="javascript:toggleRooms()" class="btn btn-outline-secondary btn-sm"><i class="bi bi-building-check"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {


<script>

    var currentDate = new Date();
    var delta = 1;
    var useDayOfWeek = -1;
    var useNextDate = false;

        document.addEventListener('DOMContentLoaded', function () {


            updateCurrentDate();
        });

    function updateCurrentDate() {
        $("#inputDate").val(currentDate.toLocaleDateString('en-CA'));
    }

    function onBack() {
        currentDate.setDate(currentDate.getDate() - delta);
        updateCurrentDate();
    }

    function onForward() {
        currentDate.setDate(currentDate.getDate() + delta);
        updateCurrentDate();
    }

</script>
}

